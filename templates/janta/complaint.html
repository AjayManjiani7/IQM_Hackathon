{% load static %}

<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Complaint Form</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/janta/complaint.css' %}">
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar sticky-top navbar-expand-lg" style="background-color: #84C0E3;">
    <div class="container-fluid">
      <a class="navbar-brand" href="#"><img src="{% static 'img/logo.png' %}" alt="" srcset="" width="120px"></a>

      <div class="collapse navbar-collapse" id="navbarSupportedContent" style="position: absolute; right: 50px;">

        <button type="button" class="btn m-2"
          style="background-color: rgb(237,37,78); color:white; border-radius: 25px;" data-toggle="button"
          aria-pressed="false" autocomplete="off">
          <i class="fa fa-plus mx-2" id="icons"></i>
          COMPLAIN
        </button>

        <section class="mb-2" style="margin-top:9px;">
          <a href="/janta/public"> <i class="fa fa-search mx-2" id="icons" style="color:black;  height: 10px;
            width: 10px;"></i></a>
          <a href="#"> <i class="fa fa-bell mx-2" id="icons" style="color:black;"></i></a>
        </section>


      </div>
    </div>
  </nav>

  <div class="heading"> ADD NEW COMPLAINT </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"></script>

    <div class="form-container">
<form action="">

  <div class="row">
    <div class="col-25">
      <label for="fname"> Name : </label>
    </div>
    <div class="col-75">
      <input type="text" id="fname" name="name">
    </div>
  </div>

  <div class="row">
    <div class="col-25">
      <label for="lname">Contact No. : </label>
    </div>
    <div class="col-75">
      <input type="text" id="contact-no" name="contact-no" >
      <button type="button" class="btn btn-primary" style="margin-top: 10px;" id="otp_btn" >Get Otp</button>
    </div>
  </div>

  <div class="row" id="otp_div" style="display: none;">
    <div class="col-25">
      <label for="lname">OTP : </label>
    </div>
    <div class="col-75">
      <input type="text" id="otp" name="otp">
      <button type="button" class="btn btn-primary" style="margin-top: 10px;" id="verify_btn" >Verify</button>
    </div>
  </div>

  <div class="row">
    <div class="col-25">
      <label for="lname">Aadhaar No. : </label>
    </div>
    <div class="col-75">
      <input type="text" id="lname" name="aadhar">
    </div>
  </div>

  <div class="row">
    <div class="col-25">
      <label for="lname">Email : </label>
    </div>
    <div class="col-75">
      <input type="text" id="lname" name="email">
    </div>
  </div>


  </form>
</form>
</div>

<div class="form-container-2">
  <form action="create_comp" method="post">
    {% csrf_token %}
    <!-- Title -->
    <div class="mb-3 mx-5">
      <label for="title" class="form-label">Title : </label> 
      <input type="text" placeholder="INTRODUCE YOUR PROBLEM IN 50 WORDS" name="title" class="form-control w-60" id="title"
      aria-describedby="Location" required>
    </div>

    <!-- Severity -->
    <div class="mb-3 mx-5">
      <label for="severity" name="sev" class="form-label">Severity</label> &nbsp;
      <input type="radio" id="html" name="severity" value="1">
      <label for="1">1</label> &nbsp;
      <input type="radio" id="html" name="severity" value="2">
      <label for="1">2</label> &nbsp;
      <input type="radio" id="html" name="severity" value="3">
      <label for="1">3</label> &nbsp;
      <input type="radio" id="html" name="severity" value="4">
      <label for="1">4</label> &nbsp;
      <input type="radio" id="html" name="severity" value="5">
      <label for="1">5</label> &nbsp;
    </div>

    <!--  Department -->
    <div class="mx-5 mb-2 mt-3">
      <label for="department" class="form-label">Department : </label> &nbsp; &nbsp;
      <select name="dept" id="dept" required>
        <option selected="selected">--Select department--</option>

        <option value="education">Education</option>
        <option value="agriculture">Agriculture</option>
        <option value="finance">Finance</option>
        <option value="Sports">Sports</option>
        <option value="Women and Child Development">Women and Child Development</option>

      </select>
    </div>


    <!-- Description -->
    <div class="mb-3 mx-5">
      <label for="description" class="form-label">Description : </label>
      <br>
      <textarea name="desc" id="desc" maxlength="1000" rows="2" cols="77" placeholder="ADD DISCRIPTION OF YOUR PROBLEM IN 1000 WORDS" required></textarea>
    </div>

    <!-- choose files (photo - video ) -->
    <div class="mb-3 mx-5">
      <label for="photo" class="form-label"> Upload a Photo/video : </label>
      <br>
      <input type="file" accept="image/*" id="photo" name="photo">
      <!-- <input type="submit"> -->
    </div>

    <!-- Location -->
    <div class="mb-3 mx-5">
      <label for="location" class="form-label">Location : </label>
      <input type="text" class="form-control " name="location"  placeholder="City" id="location"
      aria-describedby="Location" required>
    </div>

    <!-- <div class="mb-3 mx-5">
      <input type="checkbox" id="html" name="send_copy">
      <label for="send_copy" name="send_copy" class="form-label"> Send a copy on E-mail</label> 
    </div> -->

  
    <button type="submit" class="btn btn-primary mb-3 mx-5">Submit</button>
  </form>
</div>
  <!-- Footer -->
  <!-- FOOTER -->

  <footer class="text-center text-white" style="background-color: rgba(20,82,119,0.76); color: white;">

    <ul id="foo-ul">
      <li><a href="https://www.ndtv.com/">NEWS</a></li>
      <li><a href="/faq/">FAQ'S</a></li>
      <li><a href="/">ABOUT US</a></li>
      <li><a href=“tel:1800-4250-0025”>CONTACT US</a></li>
      <li><a href="mailto: review.feeback@gmail.com">REVIEW AND FEEDBACK</a></li>
    </ul>


    <div id="foo-icons">
<!-- Copyright -->
<div class="mx-5">
  © 2022 Copyright : &nbsp; BRING CHANGE
</div>

<div>
  <!-- Section: Social media -->
  <section class="mb-2" style="margin-left: 600px;">
    <a href="#"> <i class="fa fa-facebook mx-2" style="color:black; font-size: 25px;"></i></a>
    <a href="#"> <i class="fa fa-twitter mx-2" style="color:black; font-size: 25px;"></i></a>
    <a href="#"> <i class="fa fa-linkedin mx-2" style="color:black; font-size: 25px;"></i></a>
    <a href="#"> <i class="fa fa-instagram mx-2" style="color:black; font-size: 25px;"></i></a>
  </section>
  <!-- Section: Social media -->
</div>
</div>
  </footer>

  <script>
    var id = '';
    document.getElementById('otp_btn').onclick = function () {
      document.getElementById('otp_div').style.display = 'flex';
      document.getElementById('otp_btn').style.display = 'none';
      document.getElementById('contact-no').disabled = true;

      const url='/janta/send_otp/'+document.getElementById('contact-no').value;

      fetch(url, {
          method: "GET",
          headers: {
              Accept: "application/json, text/plain, /",
              "Content-Type": "application/json",
          },
      }).then(result => result.json().then((res)=>{
          console.log(res)

          id = res.id;

      }))
    }


    // vefiry otp
    document.getElementById('verify_btn').onclick = function () {
      var otp = document.getElementById('otp').value;


      const url='/janta/verify_otp/'+id+'/'+otp;

      fetch(url, {
          method: "GET",
          headers: {
              Accept: "application/json, text/plain, /",
              "Content-Type": "application/json",
          },
      }).then(result => result.json().then((res)=>{
          
        if (res.value){
          alert("Verified")
          document.getElementById('otp_div').style.display = 'none';
          document.getElementById('otp_btn').style.display = 'none';
          
        }
        else{
          alert("wrong otp")
        }
      }))
    }
  </script>
</body>

</html>